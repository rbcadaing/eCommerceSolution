
pool:
  vmImage: ubuntu-latest

parameters:
  - name: setupAKSCluster
    displayName: 'Setup Azure AKS Cluster'
    type: boolean
    default: false

variables:
  - name: setup
    value: ${{ parameters.setupAKSCluster }}
  - group: aks

steps:
- task: AzureCLI@2
  inputs:
    azureSubscription: 'Dentsu(cce8043b-d059-4c18-82ac-3a35dc504a2c)'
    scriptType: 'pscore'
    scriptLocation: 'scriptPath'
    scriptPath: '$(Build.SourcesDirectory)/aks/scripts/starter/setup_ecommerce_environment.ps1'
    arguments: "-Create $$(setup) -clusterName $(ECOMMERCE_AKS_CLUSTER_NAME) -envRG $(ECOMMERCE_AKS_RG) -envRGLocation $(ECOMMERCE_AKS_RG_REGION)"
